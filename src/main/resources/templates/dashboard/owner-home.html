<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Owner Dashboard</title>
    <link rel="stylesheet" th:href="@{/dashboard/owner-home.css}" />
</head>
<body>

<nav class="top-nav" style="background-color:#d16d37">
    <div class="brand" style="color: #0e0e0c">MyRestaurant</div>

    <div class="nav-controls">
        <label for="restaurantSelector" class="visually-hidden">Select Restaurant:</label>
        <select id="restaurantSelector" class="restaurant-selector"></select>
    </div>

    <div class="nav-links">
        <a href="/owner/dashboard" class="active">Home</a>
        <a href="#" id="nav-food">Food Items</a>
        <a href="#" id="nav-deals">Deals</a>
        <a href="/logout">Logout</a>
    </div>
</nav>

<main class="container" >
    <header class="hero">
        <h1>Welcome, <span th:text="${fullName}">Owner</span></h1>
        <p class="subtitle">Manage your menu and deals</p>
    </header>

    <!-- FOOD SECTION -->
    <section id="food-section" class="panel"  style="background-color: rgb(243, 176, 121)">
        <div class="panel-header"  style="background-color: rgb(243, 176, 121)">
            <h2>Food Items</h2>
            <button id="btn-new-food" class="primary">+ New Item</button>
        </div>
        <div style="background-color:  rgb(243, 176, 121)">
        <div id="food-loading" class="loading">Loading food items...</div>
        <div id="food-list" class="grid"></div>
        </div>
    </section>

    <!-- DEALS SECTION -->
    <section id="deals-section" class="panel hidden">
        <div class="panel-header">
            <h2>Deals</h2>
            <button id="btn-new-deal" class="primary">+ New Deal</button>
        </div>
        <div id="deals-loading" class="loading">Loading deals...</div>
        <div id="deals-list"></div>
    </section>
</main>

<!-- Toast -->
<div id="toast" class="toast hidden"></div>

<!-- FOOD MODAL -->
<div id="modal-food" class="modal hidden">
    <form id="food-form" class="modal-form" enctype="multipart/form-data">
        <input type="hidden" name="id" />
        <h3 id="food-form-title">New Food Item</h3>
        <label>Name<input name="name" required /></label>
        <label>Description<textarea name="description"></textarea></label>
        <label>Price<input name="price" type="number" step="0.01" required /></label>
        <label>Category<input name="category" /></label>
        <label>Image<input name="image" type="file" accept="image/*" /></label>

        <div class="modal-actions">
            <button type="submit" class="primary">Save</button>
            <button type="button" id="food-cancel">Cancel</button>
        </div>
    </form>
</div>

<!-- DEAL MODAL -->
<div id="modal-deal" class="modal hidden" style="background-color:  rgb(243, 176, 121)">
<!--    Added enctype="multipart/form-data" to pass in the form-->
    <form id="deal-form" class="modal-form" enctype="multipart/form-data">
        <input type="hidden" name="id" />
        <h3 id="deal-form-title">New Deal</h3>
        <label>Title<input name="title" required /></label>
        <label>Description<textarea name="description"></textarea></label>
        <label>Discount value<input name="discountValue" type="number" step="0.01" required /></label>
        <label>Discount type
            <select name="discountType">
                <option value="PERCENT">Percent</option>
                <option value="AMOUNT">Amount</option>
            </select>
        </label>
        <label>Start date<input name="startDate" type="date" required /></label>
        <label>End date<input name="endDate" type="date" required /></label>
        <label>Applicable item IDs (comma separated)<input name="applicableItemIds" /></label>

        <div class="modal-actions">
            <button type="submit" class="primary">Save</button>
            <button type="button" id="deal-cancel">Cancel</button>
        </div>
    </form>
</div>

<script th:src="@{/js/owner-home.js}"></script>
</body>
</html>
