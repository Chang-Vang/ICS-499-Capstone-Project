<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <link rel="stylesheet" th:href="@{/dashboard/home.css}">
</head>
<body>
<div class="dashboard">
    <!-- Header -->
    <header class="header">
        <h1>Welcome, <span th:text="${fullName}">User</span></h1>
        <div class="header-icons">
<!--            <button class="icon-btn">ğŸ””</button>--> <!-- Notifications icon (commented out) -->

            <div class="cart-wrapper" onclick="window.location.href='/cart'">
                <span class="cart-icon">ğŸ›’</span>
                <span class="cart-count"
                      th:if="${cartCount != null and cartCount > 0}"
                      th:text="${cartCount}">0</span>
            </div>


            <a href="/logout" class="logout-btn" title="Log out">Logout</a>
        </div>
    </header>

    <!-- Offer Banner -->
    <section class="offer-banner">
        <img src="/images/burger.webp" alt="Burger" />
        <div class="offer-text">
            <h3>The special hot burger</h3>
            <button class="order-btn">Order now</button>
        </div>
    </section>

    <!-- Best Offers -->
    <section class="section">
        <h2>Best offers</h2>
        <div class="cards-container">
            <div class="card" th:each="offer : ${offers}">
                <p th:text="${offer.description}">Offer description</p>
                <p th:text="${offer.price}">$0.00</p>

                <form th:action="@{/cart/add}" method="post">
                    <input type="hidden" name="foodId" th:value="${offer.foodId()}">
                    <button type="submit" class="order-btn">Add to Cart</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Restaurants Nearby -->
    <section class="section">
        <h2>Restaurants nearby</h2>
        <div class="restaurant-card"
             th:each="restaurant : ${restaurants}"
             th:onclick="'window.location.href=\'/restaurant/' + ${restaurant.id} + '\';'">

            <p th:text="${restaurant.name}">Restaurant Name</p>
            <p class="rating" th:text="${restaurant.category} ?: 'Restaurant'"></p>
            <p th:text="${restaurant.location} ?: 'Location not set'"></p>
        </div>

    </section>
</div>

<!-- Bottom Navigation -->
<nav class="bottom-nav">
    <form action="/home" method="get" style="display: contents">
        <button type="submit" class="nav-btn" title="Home">ğŸ <br/>Home</button>
    </form>
    <form action="/search" method="get" style="display: contents">
        <button type="submit" class="nav-btn" title="Search">ğŸ”<br/>Search</button>
    </form>
    <form action="/order" method="get" style="display: contents">
        <button type="submit" class="nav-btn" title="Order">ğŸ“<br/>Order</button>
    </form>
    <form action="/profile" method="get" style="display: contents">
        <button type="submit" class="nav-btn" title="Profile">ğŸ‘¤<br/>Profile</button>
    </form>
    </nav>
</body>
</html>